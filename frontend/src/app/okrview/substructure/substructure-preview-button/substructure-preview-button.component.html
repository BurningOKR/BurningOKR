<div *ngIf="department$ | async as department; else loading">
  <button class="previewButton" [ngClass]="{ 'inactive-element': !department.isActive }" mat-raised-button [routerLink]="['../../departments', departmentId]" i18n-[matTooltip]="@@component_departmentPreviewButton_showDepartment" [matTooltip]="department.name + ' anzeigen'">
    <div class="d-flex center">
      <div class="f-1">
        <mat-icon class="font-32">group</mat-icon>
      </div>
      <div class="f-5">
        {{ title }}
        <br/>
        {{ department.name }}
        <div class="d-flex">
          <div class="f-1">
            <mat-icon i18n-matTooltip="@@component_departmentPreviewButton_listObjectives" matTooltip="Objectives dieses Struktur">list</mat-icon>
            {{ department.objectives.length }}
          </div>
          <div class="f-1">
            <mat-icon i18n-matTooltip="@@component_departmentPreviewButton_listSubstructure" matTooltip="Unterstrukturen dieser Struktur">low_priority</mat-icon>
            <!-- TODO: (R.J. 02.06.20) Make this work with corporateObjectiveStructure -->
            <!--            {{ department.subStructureIds.length }}-->
          </div>
        </div>
      </div>
      <div class="f-05" *ngIf="!department.isActive">
        <mat-icon i18n-matTooltip="@@component_departmentPreviewButton_notActive" matTooltip="Diese Struktur ist nicht aktiv">info</mat-icon>
      </div>
    </div>
  </button>
</div>

<!-- Placeholder for loading -->
<ng-template #loading>
  <mat-card class="previewButton">
    <p i18n="@@component_departmentPreviewButton_load">Lade {{ title }}</p>
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
  </mat-card>
</ng-template>
