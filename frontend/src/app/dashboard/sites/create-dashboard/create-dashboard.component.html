<app-okr-toolbar>
  <button [routerLink]="['/companies']" class="navbar-item" mat-icon-button>
    <mat-icon>home</mat-icon>
  </button>
  <span>{{'create-dashboard.okr-toolbar.create-dashboard' | translate}}</span>
  <span class="fill-space"></span>
</app-okr-toolbar>

<div class="dashboard-creation-title">
  <mat-form-field>
    <input matInput placeholder="{{'create-dashboard.dashboard-title-placeholder' | translate}}" [(ngModel)]="dashboardCreationDto.title">
  </mat-form-field>
</div>

<div *ngIf="companyId$ | async">
  <div class="chart-creation">

    <div class="chart-creation-options" *ngFor="let chart of charts">
      <app-chart-options-card [chart]="chart" (clickedDelete)="deleteChart($event)"
                              [allTeams$]="teams$"></app-chart-options-card>
    </div>

    <div class="chart-creation-options">
      <p>{{'create-dashboard.add-new-chart-to-dashboard' | translate}}</p>
      <mat-form-field>
        <input matInput placeholder="{{'create-dashboard.chart-title-placeholder' | translate}}" [(ngModel)]="newChart.title">
      </mat-form-field>

      <mat-form-field>
        <mat-select (selectionChange)="chartSelected($event)" placeholder="{{'create-dashboard.type-of-chart-placeholder' | translate}}">
          <mat-option *ngFor="let chartType of chartTypes" value="{{chartType}}"
                      matTooltip="{{chartTypeRecord[chartType] | translate}}">
            {{chartTypeRecord[chartType] | translate}}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field *ngIf="teamIsSelectable">
        <mat-select multiple placeholder="{{'create-dashboard.select-teams-placeholder' | translate}}" [(value)]="newChart.teamIds">
          <mat-option *ngFor="let team of teams$ | async" [value]="team.id">{{team.name}}</mat-option>
        </mat-select>
      </mat-form-field>

      <button [disabled]="!newChartValid()" class="chart-creation-add-button" mat-stroked-button
              (click)="addChart()">
        <mat-icon>add</mat-icon>
        {{'create-dashboard.add-chart-button' | translate}}
      </button>
    </div>
  </div>

  <div class="button-create-dashboard">
    <button [disabled]="!dashboardValid()" mat-stroked-button
            (click)="createDashboardAndRouteToDashboard$()">
      <mat-icon>add_circle_outline</mat-icon>
      {{'create-dashboard.create-dashboard-button' | translate}}
    </button>
  </div>
</div>
