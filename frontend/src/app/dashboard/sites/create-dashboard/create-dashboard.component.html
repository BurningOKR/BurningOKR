<app-okr-toolbar>
  <button [routerLink]="['/companies']" class="navbar-item" mat-icon-button>
    <mat-icon>home</mat-icon>
  </button>
  <span>Dashboard anlegen</span> <!-- TODO P.B. 28-03-2022 TRANSLATE!-->
  <span class="fill-space"></span>
</app-okr-toolbar>

<div class="chart-creation">
  <div class="chart-creation-options" *ngFor="let chart of charts">
    <p class="chart-title">Titel: {{chart.title}}</p>
    <p>Art: {{chart.chartType}}</p>
    <p *ngIf="chart.teamId">Team: {{chart.teamId}}</p>

    <button mat-icon-button mat-mini-fab color="primary" (click)="deleteChart(chart)">
      <mat-icon>delete</mat-icon>
    </button>
  </div>

  <div class="chart-creation-options">
    <mat-form-field>
      <input class="chart-creation-single-option" matInput placeholder="Titel" [(ngModel)]="newChart.title">
    </mat-form-field>

    <mat-form-field>
      <mat-select placeholder="Chart-Art auswählen" class="chart-creation-single-option" [(value)]="newChart.chartType">
        <mat-option *ngFor="let chartType of chartTypes"
                    value="{{chartType}}">{{chartType}}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field *ngIf="newChartIsLineChart()">
      <mat-select placeholder="Team auswählen" class="chart-creation-single-option" [(value)]="newChart.teamId">
        <mat-option *ngFor="let team of teams$ | async" value="{{team.id}}">{{team.name}}</mat-option>
      </mat-select>
    </mat-form-field>

    <button [disabled]="!newChartValid()" class="chart-creation-add-button" mat-icon-button mat-mini-fab color="accent"
            (click)="addDashboard()">
      <mat-icon>add</mat-icon>
    </button>
  </div>
</div>

<div class="button-create-dashboard">
  <button [disabled]="charts.length < 1" mat-stroked-button (click)="createDashboard()">
    <mat-icon>add_circle_outline</mat-icon>
    Erstellen
  </button>
</div>
